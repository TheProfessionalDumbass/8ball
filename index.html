<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic 8-Ball</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #answer {
            margin-top: 20px;
            font-size: 1.5em;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Magic 8-Ball</h1>
    <p>Ask a question and click the button to get your answer!</p>
    <input type="text" id="question" placeholder="Type your question here">
    <button onclick="getAnswer()">Ask the 8-Ball</button>
    <div id="answer"></div>

    <script>
        async function getAnswer() {
            const question = document.getElementById('question').value.trim();
            const answerDiv = document.getElementById('answer');

            if (!question) {
                answerDiv.textContent = "Please ask a question!";
                return;
            }

            try {
                const apiUrl = `https://eightballapi.com/api/biased?question=${encodeURIComponent(question)}`;
                const response = await fetch(apiUrl, { mode: 'cors', redirect: 'follow' });

                if (!response.ok) {
                    throw new Error(`Failed to fetch answer from the API. Status: ${response.status}`);
                }

                const data = await response.json();
                answerDiv.textContent = data.reading || "Could not retrieve an answer.";
            } catch (error) {
                if (error.message.includes('CORS')) {
                    answerDiv.textContent = "Error: Unable to fetch the answer due to CORS restrictions.";
                } else {
                    answerDiv.textContent = "Error: Unable to get an answer. Please try again later.";
                }
                console.error("Error fetching the Magic 8-Ball answer:", error);
            }
        }
    </script>
</body>
</html>